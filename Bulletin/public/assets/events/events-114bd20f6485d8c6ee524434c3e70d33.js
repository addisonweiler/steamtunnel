//# Place all the behaviors and hooks related to the matching controller here.
//# All this logic will automatically be available in application.js.
//# You can use CoffeeScript in this file: http://jashkenas.github.com/coffee-script/
//# Change text when favorite link clicked on
function eventsScrollable(){return $(".event").last().offset().top>$(document).height()}$(document).ready(function(){bindEvents(),$("p.notice, p.alert").delay(500).fadeIn("normal",function(){$(this).delay(2500).fadeOut()}),$("#date_selected").change(postDateSelection)}),bindEvents=function(){$(".favorite, .unfavorite, #detailsLinks").bind("click",toggleFavorite),$(".event").bind("click",fillDetails)},fillDetails=function(a){if($(a.target).is(".favorite")||$(a.target).is(".unfavorite"))return;var b=$(this).children(".title").text();$("#detailsTitle").text(b);var c=$(this).children(".footer").children(".links").html();$("#detailsLinks").html(c);var d=$(this).children(".location").html();$("#detailsLocation").html(d);var e=$(this).children(".description").text();$("#detailsDescription").text(e);var f=$(this).children(".info").html();$("#detailsInfo").html(f);var g=$(this).children(".footer").children(".group").text();$("#detailsGroup").text(g)},toggleFavorite=function(a){if($(a.target).is("a")){var b=a.target.innerHTML=="Favorite"?"Unfavorite":"Favorite";a.target.innerHTML=b,a.target.className=a.target.className.replace(/(?:^|\s)favorite(?!\S)/,b.toLowerCase())}},postDateSelection=function(){elem=$(this).children(":selected");var a=$(elem).text(),b={date:a},c="/events";$.ajax({url:c+"?date="+a,type:"get",dataType:"script",success:bindEvents})}