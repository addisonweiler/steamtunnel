//# Place all the behaviors and hooks related to the matching controller here.
//# All this logic will automatically be available in application.js.
//# You can use CoffeeScript in this file: http://jashkenas.github.com/coffee-script/
//# Change text when favorite link clicked on
function eventsScrollable(){return $(".event").last().offset().top>$(document).height()}$(document).ready(function(){$(".favorite").bind("click",toggleFavorite),$(".unfavorite").bind("click",toggleFavorite),$("#detailsLinks").bind("click",toggleFavorite),$(":checkbox").bind("click",toggleGroupEvents),$(":checkbox").bind("click",postGroupSelection),$(":checkbox").each(toggleGroupEvents),$(".event").bind("click",fillDetails),$("#select_all").bind("click",affectAll),$("#deselect_all").bind("click",affectAll),$("p.notice").delay(500).fadeIn("normal",function(){$(this).delay(2500).fadeOut()})}),affectAll=function(){var a=this.id=="select_all";$('input[type="checkbox"]').prop("checked",a),a?$(".event").show():$(".event").hide();var b={selection_data:{all:a}},c="/events/select_groups";$.post(c,b)},fillDetails=function(a){if($(a.target).is(".favorite")||$(a.target).is(".unfavorite"))return;var b=$(this).children(".title").text();$("#detailsTitle").text(b);var c=$(this).children(".footer").children(".links").html();$("#detailsLinks").html(c);var d=$(this).children(".location").html();$("#detailsLocation").html(d);var e=$(this).children(".description").text();$("#detailsDescription").text(e);var f=$(this).children(".info").html();$("#detailsInfo").html(f);var g=$(this).children(".footer").children(".group").text();$("#detailsGroup").text(g)},toggleFavorite=function(a){if($(a.target).is("a")){var b=a.target.innerHTML=="Favorite"?"Unfavorite":"Favorite";a.target.innerHTML=b,a.target.className=a.target.className.replace(/(?:^|\s)favorite(?!\S)/,b.toLowerCase())}},toggleGroupEvents=function(){var a="."+$(this).parent()[0].id;this.checked?$(a).show():$(a).hide()},postGroupSelection=function(){var a=String(this.id),b={};b[a]=this.checked;var c={selection_data:b},d="/events/select_groups";$.post(d,c)}