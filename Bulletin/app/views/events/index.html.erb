<% javascript "events/events.js" %>

<div class="left main">
  <table>
    <tr>
      <td>
        <div id="filter_toolbar">
          <div id="DateSelector">
            <select id="date_selected">
              <%= options_for_select @dates.keys, :selected => @selected_date %>
            </select>
          </div>
        </div>
      </td>
      <td>
        <div id="search-wrapper">
          <input type="search" id="search-input" placeholder="Search Everything" autosave='plaza-search' results = 5 />
        </div>
      </td>
    </tr>
  </table>

  <div>
    <%= form_tag select_filters_events_path, :method => "post" do %>
        <table>
          <% if @selected_filters == nil %>
              <%= puts "selected filters doesn't exist yet." %>
              <%@selected_filters = {} %>
          <% end %>
          <% @tags.each do |tag| %>
              <td><div id="<%=tag.name%>_tag">
                <%= check_box_tag "selected_filters[]", tag.id, @selected_filters.include?(tag.id.to_s) %>
                <%= label_tag tag.name, tag.name %>
              </div></td>
          <% end %>
          <!-- <tr><td> <%= submit_tag "Reload" %> </td></tr> -->
        </table>
    <% end %>
  </div>


  <div class='page'>
    <% if @events.empty? %>
        <div id="NoEventsFound"> No events found </div>
    <% else %>
        <%= render @events %>
    <% end %>
  </div>
</div>

<div id="Panel" >
  <div class="right_details">
    <h3 id="detailsTitle"> Click an Event to See Details </h3><br />
    <div id="detailsLinks"></div><br />
    <div id="detailsLocation"></div><br />
    <p id="detailsDescription"> </p>
    <div id="detailsInfo"></div>
    <p id="detailsGroup"></p>
  </div>
</div>